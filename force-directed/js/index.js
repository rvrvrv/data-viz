'use strict';var _createClass=function(){function a(b,c){for(var g,f=0;f<c.length;f++)g=c[f],g.enumerable=g.enumerable||!1,g.configurable=!0,'value'in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}return function(b,c,f){return c&&a(b.prototype,c),f&&a(b,f),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var Graph=function(a){function b(){var o,j,k,l;_classCallCheck(this,b);for(var m=arguments.length,h=Array(m),n=0;n<m;n++)h[n]=arguments[n];return l=(j=(k=_possibleConstructorReturn(this,(o=b.__proto__||Object.getPrototypeOf(b)).call.apply(o,[this].concat(h))),k),k.generateGraph=function(){var _this$props=k.props,p=_this$props.width,q=_this$props.height,r=_this$props.data,s=d3.select('svg').attr('width',p).attr('height',q),t=d3.forceSimulation().force('link',d3.forceLink().id(function(x){return x.index})).force('charge',d3.forceManyBody().strength(-55)).force('center',d3.forceCenter(p/2,q/2)).force('x',d3.forceX(p/2)).force('y',d3.forceY(q/2)),u=s.append('g').attr('class','links').selectAll('line').data(r.links).enter().append('line'),v=d3.select('.graph-wrapper').selectAll('img').data(r.nodes).enter().append('img').attr('src','https://rvrvrv.github.io/img/blank.gif').attr('class',function(x){return'flag flag-'+x.code}).attr('alt',function(x){return x.country}).call(d3.drag().on('start',function(x){d3.event.active||t.alphaTarget(0.3).restart(),x.fx=x.x,x.fy=x.y}).on('drag',function(x){0<d3.event.x&&0<d3.event.y&&d3.event.x<window.innerWidth-50&&d3.event.y<window.innerHeight-100&&(x.fx=d3.event.x,x.fy=d3.event.y)}).on('end',function(x){d3.event.active||t.alphaTarget(0),x.fx=null,x.fy=null}));t.nodes(r.nodes).on('tick',function w(){u.attr('x1',function(x){return x.source.x}).attr('y1',function(x){return x.source.y}).attr('x2',function(x){return x.target.x}).attr('y2',function(x){return x.target.y}),v.style('left',function(x){return x.x+8+'px'}).style('top',function(x){return x.y+64+'px'})}),t.force('link').links(r.links)},j),_possibleConstructorReturn(k,l)}return _inherits(b,a),_createClass(b,[{key:'componentDidMount',value:function componentDidMount(){this.generateGraph()}},{key:'render',value:function render(){return React.createElement('div',{className:'graph'})}}]),b}(React.Component),GraphWrapper=function(a){function b(){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.resizeGraph=function(){c.setState({width:Math.max(200,window.innerWidth-50),height:Math.max(200,window.innerHeight-100)})},c.state={width:Math.max(200,window.innerWidth-50),height:Math.max(200,window.innerHeight-100)},c}return _inherits(b,a),_createClass(b,[{key:'componentDidMount',value:function componentDidMount(){window.addEventListener('resize',this.resizeGraph)}},{key:'componentWillUnmount',value:function componentWillUnmount(){window.removeEventListener('resize',this.resizeGraph)}},{key:'render',value:function render(){return React.createElement('div',{className:'graph-wrapper'},React.createElement('svg',{width:this.state.width,height:this.state.height}),React.createElement(Graph,{width:this.state.width,height:this.state.height,data:this.props.data}))}}]),b}(React.Component),App=function(a){function b(c){_classCallCheck(this,b);var f=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));try{var g=forceDirectedData;f.state={data:g}}catch(h){f.state={data:null}}return f}return _inherits(b,a),_createClass(b,[{key:'render',value:function render(){return React.createElement('div',null,React.createElement('h1',null,'National Contiguity'),React.createElement('h2',null,'Neighboring Countries'),this.state.data?React.createElement(GraphWrapper,{data:this.state.data}):React.createElement('h3',null,'An error has occurred. Please try again later.'))}}]),b}(React.Component);ReactDOM.render(React.createElement(App,null),document.getElementById('root'));
