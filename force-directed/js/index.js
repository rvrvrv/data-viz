'use strict';var _createClass=function(){function a(b,c){for(var g,f=0;f<c.length;f++)g=c[f],g.enumerable=g.enumerable||!1,g.configurable=!0,'value'in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}return function(b,c,f){return c&&a(b.prototype,c),f&&a(b,f),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var Graph=function(a){function b(){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.generateGraph=function(){var _this$state=c.state,g=_this$state.width,h=_this$state.height,j=c.props.data,k=d3.select('svg').attr('width',g).attr('height',h),l=d3.select('body').append('div').attr('class','tooltip'),m=function(t,u,v){l.transition().duration(250).style('opacity',0.9),l.html(t).style('left',u-42+'px').style('top',v-16+'px')},n=500>g?0.4:0.1,o=700>h?0.2:0.06,p=d3.forceSimulation().force('link',d3.forceLink()).force('charge',d3.forceManyBody().strength(-55)).force('center',d3.forceCenter(g/2,h/2)).force('x',d3.forceX(g/2).strength(n)).force('y',d3.forceY(h/2).strength(o)),q=k.append('g').attr('class','links').selectAll('line').data(j.links).enter().append('line'),r=d3.select('#flags').selectAll('img').data(j.nodes).enter().append('img').attr('src','https://rvrvrv.github.io/img/blank.gif').attr('class',function(t){return'flag flag-'+t.code}).attr('alt',function(t){return t.country}).call(d3.drag().on('start',function(t){d3.event.active||p.alphaTarget(0.3).restart(),t.fx=t.x,t.fy=t.y}).on('drag',function(t){0<d3.event.x&&0<d3.event.y&&d3.event.x<window.innerWidth-64&&d3.event.y<window.innerHeight-100&&(t.fx=d3.event.x,t.fy=d3.event.y)}).on('end',function(t){d3.event.active||p.alphaTarget(0),t.fx=null,t.fy=null})).on('mouseover',function(t){window.event.buttons||m(t.country,t.x,t.y)}).on('mouseout',function(){l.transition().duration(400).style('opacity',0)}).on('click',function(t){m(t.country,t.x,t.y)});p.nodes(j.nodes).on('tick',function s(){q.attr('x1',function(t){return t.source.x}).attr('y1',function(t){return t.source.y}).attr('x2',function(t){return t.target.x}).attr('y2',function(t){return t.target.y}),r.style('left',function(t){return t.x+'px'}).style('top',function(t){return t.y+48+'px'})}).alpha(0.3),p.force('link').links(j.links)},c.resizeGraph=function(){c.setState({width:Math.max(200,window.innerWidth-50),height:Math.max(200,window.innerHeight-100)})},c.state={width:Math.max(200,window.innerWidth-50),height:Math.max(200,window.innerHeight-100)},c}return _inherits(b,a),_createClass(b,[{key:'componentDidMount',value:function componentDidMount(){window.addEventListener('resize',this.resizeGraph),this.generateGraph()}},{key:'componentWillUnmount',value:function componentWillUnmount(){window.removeEventListener('resize',this.resizeGraph)}},{key:'render',value:function render(){return React.createElement('div',{className:'graph-wrapper'},React.createElement('svg',{width:this.state.width,height:this.state.height,id:'graphBox'}),React.createElement('div',{id:'flags'}))}}]),b}(React.Component),App=function(a){function b(c){_classCallCheck(this,b);var f=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));try{var g=forceDirectedData;f.state={data:g}}catch(h){f.state={data:null}}return f}return _inherits(b,a),_createClass(b,[{key:'render',value:function render(){return React.createElement('div',null,React.createElement('h1',null,'National Contiguity'),React.createElement('h2',null,'Neighboring Countries'),this.state.data?React.createElement(Graph,{data:this.state.data}):React.createElement('h3',null,'An error has occurred. Please try again later.'))}}]),b}(React.Component);ReactDOM.render(React.createElement(App,null),document.getElementById('root'));
